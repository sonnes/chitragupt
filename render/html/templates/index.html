{{define "index.html"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sessions â€” chitragupt</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
        @theme {
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-700 dark:text-slate-300 font-sans" style="line-height: 1.65; padding: 48px 24px;">
    <div class="max-w-3xl mx-auto">
        <h1 class="text-3xl font-bold text-slate-900 dark:text-white mb-8">Sessions</h1>
        {{if not .Entries}}
        <p class="text-slate-500 dark:text-slate-400">No sessions found.</p>
        {{else}}
        <div class="flex flex-col gap-3">
            {{range .Entries}}
            <a href="{{.Href}}" class="block no-underline group">
                <div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-5 hover:border-slate-400 dark:hover:border-slate-500 transition-colors">
                    <!-- Row 1: Title + Diff Stats -->
                    <div class="flex items-baseline gap-3 mb-2">
                        <h2 class="text-base font-semibold text-slate-900 dark:text-white truncate">
                            {{if .Title}}{{.Title}}{{else}}Session {{.SessionID}}{{end}}
                        </h2>
                        {{if .DiffStats}}
                        <div class="flex items-center gap-2 text-xs font-mono font-semibold whitespace-nowrap shrink-0">
                            {{if .DiffStats.Added}}<span class="text-emerald-600 dark:text-emerald-400">+{{formatNumber .DiffStats.Added}}</span>{{end}}
                            {{if .DiffStats.Changed}}<span class="text-amber-600 dark:text-amber-400">~{{formatNumber .DiffStats.Changed}}</span>{{end}}
                            {{if .DiffStats.Removed}}<span class="text-red-600 dark:text-red-400">-{{formatNumber .DiffStats.Removed}}</span>{{end}}
                        </div>
                        {{end}}
                    </div>
                    <!-- Row 2: Metadata -->
                    <div class="flex flex-wrap items-center gap-3 text-xs text-slate-500 dark:text-slate-400">
                        {{if or .Author .Agent}}
                        <span class="flex items-center gap-1">
                            {{metaIcon "user"}}
                            <span class="font-medium">@{{if .Author}}{{.Author}}{{else}}{{.Agent}}{{end}}</span>
                        </span>
                        {{end}}
                        {{if not .CreatedAt.IsZero}}
                        <span class="flex items-center gap-1">
                            {{metaIcon "clock"}}
                            {{relativeTime .CreatedAt}}
                        </span>
                        {{end}}
                        {{if .Model}}
                        <span class="flex items-center gap-1">
                            {{metaIcon "model"}}
                            {{.Model}}
                        </span>
                        {{end}}
                        {{if .Usage}}
                        <span class="font-mono">
                            {{formatNumber .Usage.InputTokens}}in / {{formatNumber .Usage.OutputTokens}}out
                        </span>
                        {{end}}
                        <span class="text-slate-400 dark:text-slate-500">
                            {{.MessageCount}} messages
                        </span>
                    </div>
                </div>
            </a>
            {{end}}
        </div>
        {{end}}
        <footer class="mt-12 pt-6 border-t border-slate-200 dark:border-slate-700 text-center text-xs text-slate-400">
            Generated by <span class="text-slate-500 dark:text-slate-400">chitragupt</span>
        </footer>
    </div>
</body>
</html>
{{end}}
